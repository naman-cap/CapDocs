{"openapi":"3.1.0","info":{"title":"transaction-v1","version":"1.0"},"servers":[{"url":"https://{host}.api.capillarytech.com/v1.1/transaction","variables":{"host":{"default":"host"}}}],"components":{"securitySchemes":{}},"security":[{}],"paths":{"/add":{"post":{"summary":"Return Transaction","description":"Lets you submit a return transaction of any transaction type.","operationId":"return-transaction","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"transaction type":{"type":"string","description":"The type of transaction."},"country":{"type":"string","description":"The country in which the transaction took place."},"number":{"type":"string","description":"The unique identifier for the transaction."},"not_interested_reason":{"type":"string","description":"The reason provided for the return transaction."},"return_type":{"type":"string","description":"The type of return."},"parent_bill_number":{"type":"string","description":"The original bill number associated with the transaction."},"purchase_time":{"type":"string","description":"The date of the original purchase."},"amount":{"type":"string","description":"The amount associated with the return."},"billing_time":{"type":"string","description":"The time the bill was issued."},"customer mobile":{"type":"string","description":"The mobile number of the customer."},"customer email":{"type":"string","description":"The email address of the customer."},"customer external_id":{"type":"string","description":"An external identifier for the customer."},"customer firstname":{"type":"string","description":"The customer's first name."},"customer lastname":{"type":"string","description":"The customer's last name."},"line_item serial":{"type":"string","description":"The serial number of the item."},"line_item amount":{"type":"string","description":"The amount for the line item."},"line_item description":{"type":"string","description":"The description of the line item."},"line_item item_code":{"type":"string","description":"The unique code associated with the line item."},"line_item qty":{"type":"string","description":"The quantity of the line item."},"line_item rate":{"type":"string","description":"The rate of the line item."},"line_item value":{"type":"string","description":"The value of the line item."},"line_item attribute name":{"type":"string","description":"The attribute name of the line item."},"line_item attribute value":{"type":"string","description":"The attribute value of the line item."},"custom_data_item field_name":{"type":"string","description":"The custom field name."},"custom_data_item field_value":{"type":"string","description":"The value associated with the custom field."},"id":{"type":"integer","description":"Transaction ID of the transaction that needs to be returned.","format":"int64"}}},"examples":{"SAMPLE POST REQUEST (MIXED TRANSACTION)":{"value":{"root":{"transaction":[{"type":"mixed","number":"Exch-1112","amount":"500","notes":"1 line items","billing_time":"2018-09-26 20:10:00","gross_amount":"500","discount":"0","customer":{"mobile":"9540000000","email":"","external_id":"","firstname":"","lastname":""},"payment_details":{"payment":[{"mode":"CASH","value":"200"},{"mode":"Card","value":"200","attributes":{"attribute":[{"name":"card_type","value":"Debit Card"},{"name":"bankName","value":"BCA"},{"name":"CardIssuerCode","value":"value345"}]},"notes":"notes_602656"}]},"custom_fields":{"field":[]},"line_items":{"line_item":[{"type":"regular","serial":"1","amount":"300","description":"Testdesc04","item_code":"code04","variant":"","qty":"1","rate":"300","value":"300"},{"type":"return","return_type":"LINE_ITEM","transaction_number":"RC-15","transaction_date":"2018-09-25 10:10:10","serial":"1","amount":"50","description":"Testdesc02","item_code":"code02","variant":"","qty":"1","rate":"50","value":"50"}]}}]}}},"Sample POST request with 'id' parameter for duplicate bill numbers":{"value":{"root":{"transaction":{"type":"return","country":"true","number":"BILL990909","id":"875080362","not_interested_reason":"Example reason","return_type":"AMOUNT","parent_bill_number":"RE123","purchase_time":"2024-08-27","amount":"500","billing_time":"2024-08-27","customer":{"mobile":"13860975184","email":"","external_id":"","firstname":"Tom","lastname":"Sawyer"},"line_items":{"line_item":{"serial":"1","amount":"500","description":"soap","item_code":"item-001","qty":"50","rate":"10","value":"500","attributes":{"attribute":{"name":"brand","value":"Levis"}}}},"custom_fields_data":{"custom_data_item":{"field_name":"paymentmode","field_value":"CASH"}}}}}}}}}},"responses":{"200":{"description":"200","content":{"application/json":{"examples":{"SAMPLE RESPONSE":{"value":"{\n    \"response\": {\n        \"status\": {\n            \"success\": \"true\",\n            \"code\": 200,\n            \"message\": \"Success\"\n        },\n        \"transactions\": {\n            \"transaction\": []\n        }\n    }\n}\n          "},"Sample response for POST with 'id' parameter for duplicate bill numbers":{"value":"{\n    \"response\": {\n        \"status\": {\n            \"success\": \"true\",\n            \"code\": 200,\n            \"message\": \"Success\"\n        },\n        \"transactions\": {\n            \"transaction\": [\n                {\n                    \"id\": 24902729,\n                    \"shipping_source_till_code\": \"\",\n                    \"number\": \"BILL990909\",\n                    \"bill_client_id\": \"\",\n                    \"type\": \"RETURN\",\n                    \"delivery_status\": \"DELIVERED\",\n                    \"parent_bill_number\": \"RE123\",\n                    \"outlier_status\": \"NORMAL\",\n                    \"customer\": {\n                        \"user_id\": \"557603396\",\n                        \"mobile\": \"13860975184\",\n                        \"firstname\": \"Tom\",\n                        \"lastname\": \"Sawyer\",\n                        \"email\": \"141@capillarytech.com\",\n                        \"external_id\": \"000003880435\",\n                        \"lifetime_points\": \"0\",\n                        \"loyalty_points\": \"0\",\n                        \"current_slab\": \"Base\",\n                        \"tier_expiry_date\": \"2024-10-11 11:06:17\",\n                        \"points_summaries\": {\n                            \"points_summary\": [\n                                {\n                                    \"programId\": \"469\",\n                                    \"redeemed\": \"0\",\n                                    \"expired\": \"0\",\n                                    \"returned\": \"0\",\n                                    \"adjusted\": \"0\",\n                                    \"lifetimePoints\": \"0\",\n                                    \"loyaltyPoints\": \"0\",\n                                    \"cumulativePurchases\": \"9500\",\n                                    \"currentSlab\": \"Base\",\n                                    \"nextSlab\": \"Bronze\",\n                                    \"nextSlabSerialNumber\": \"2\",\n                                    \"nextSlabDescription\": \"Tier 2\",\n                                    \"slabSNo\": \"1\",\n                                    \"slabExpiryDate\": \"2024-10-11 11:06:17\",\n                                    \"totalPoints\": \"\"\n                                }\n                            ]\n                        },\n                        \"lifetime_purchases\": \"9500\",\n                        \"type\": \"LOYALTY\",\n                        \"source\": \"instore\"\n                    },\n                    \"side_effects\": {\n                        \"effect\": []\n                    },\n                    \"points_deducted\": 0,\n                    \"points_balance\": 0,\n                    \"source\": \"\",\n                    \"item_status\": {\n                        \"success\": \"true\",\n                        \"code\": 600,\n                        \"message\": \"Transaction added successfully\"\n                    }\n                }\n            ]\n        }\n    }\n}"}},"schema":{"oneOf":[{"title":"SAMPLE RESPONSE","type":"object","properties":{"response":{"type":"object","properties":{"status":{"type":"object","properties":{"success":{"type":"string","example":"true"},"code":{"type":"integer","example":200,"default":0},"message":{"type":"string","example":"Success"}}},"transactions":{"type":"object","properties":{"transaction":{"type":"array"}}}}}}},{"title":"Sample response for POST with 'id' parameter for duplicate bill numbers","type":"object","properties":{"response":{"type":"object","properties":{"status":{"type":"object","properties":{"success":{"type":"string","example":"true"},"code":{"type":"integer","example":200,"default":0},"message":{"type":"string","example":"Success"}}},"transactions":{"type":"object","properties":{"transaction":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer","example":24902729,"default":0},"shipping_source_till_code":{"type":"string","example":""},"number":{"type":"string","example":"BILL990909"},"bill_client_id":{"type":"string","example":""},"type":{"type":"string","example":"RETURN"},"delivery_status":{"type":"string","example":"DELIVERED"},"parent_bill_number":{"type":"string","example":"RE123"},"outlier_status":{"type":"string","example":"NORMAL"},"customer":{"type":"object","properties":{"user_id":{"type":"string","example":"557603396"},"mobile":{"type":"string","example":"13860975184"},"firstname":{"type":"string","example":"Tom"},"lastname":{"type":"string","example":"Sawyer"},"email":{"type":"string","example":"141@capillarytech.com"},"external_id":{"type":"string","example":"000003880435"},"lifetime_points":{"type":"string","example":"0"},"loyalty_points":{"type":"string","example":"0"},"current_slab":{"type":"string","example":"Base"},"tier_expiry_date":{"type":"string","example":"2024-10-11 11:06:17"},"points_summaries":{"type":"object","properties":{"points_summary":{"type":"array","items":{"type":"object","properties":{"programId":{"type":"string","example":"469"},"redeemed":{"type":"string","example":"0"},"expired":{"type":"string","example":"0"},"returned":{"type":"string","example":"0"},"adjusted":{"type":"string","example":"0"},"lifetimePoints":{"type":"string","example":"0"},"loyaltyPoints":{"type":"string","example":"0"},"cumulativePurchases":{"type":"string","example":"9500"},"currentSlab":{"type":"string","example":"Base"},"nextSlab":{"type":"string","example":"Bronze"},"nextSlabSerialNumber":{"type":"string","example":"2"},"nextSlabDescription":{"type":"string","example":"Tier 2"},"slabSNo":{"type":"string","example":"1"},"slabExpiryDate":{"type":"string","example":"2024-10-11 11:06:17"},"totalPoints":{"type":"string","example":""}}}}}},"lifetime_purchases":{"type":"string","example":"9500"},"type":{"type":"string","example":"LOYALTY"},"source":{"type":"string","example":"instore"}}},"side_effects":{"type":"object","properties":{"effect":{"type":"array"}}},"points_deducted":{"type":"integer","example":0,"default":0},"points_balance":{"type":"integer","example":0,"default":0},"source":{"type":"string","example":""},"item_status":{"type":"object","properties":{"success":{"type":"string","example":"true"},"code":{"type":"integer","example":600,"default":0},"message":{"type":"string","example":"Transaction added successfully"}}}}}}}}}}}}]}}}},"400":{"description":"400","content":{"application/json":{"examples":{"Result":{"value":"{}"}},"schema":{"type":"object","properties":{}}}}}},"deprecated":false,"x-readme":{"code-samples":[{"language":"curl","code":"curl --location 'https://eu.api.capillarytech.com/v1.1/transaction/add' \\\n--header 'Accept: application/json' \\\n--header 'Content-Type: application/json' \\\n--header 'accept: application/json' \\\n--header 'Authorization: Basic dGpfY2FwaWxsYXJ5OjTI5NjQ4MjUzZTY3ZDJiMGM2ZTk5ZjE5' \\\n--header 'Cookie: _cfuvid=K0FnoR56khf8wazu.pXkeORL929gB4vIE_D65SevHsA-1744196775822-0.0.1.1-604800000' \\\n--data-raw '\n{\n  \"transaction type\": \"RETURN\",\n  \"number\": \"test00transact002\",\n  \"return_type\": \"FULL\",\n  \"parent_bill_number\": \"test00return002\",\n  \"purchase_time\": \"2025-01-15 14:58:01\",\n  \"amount\": \"500\",\n  \"billing_time\": \"2025-01-29 15:37:00\",\n  \"customer mobile\": \"919999988887\",\n  \"customer email\": \"leomessi1919@gmail.com\",\n  \"customer external_id\": \"1919\",\n  \"customer firstname\": \"Lionel\",\n  \"customer lastname\": \"Messi\",\n  \"line_item serial\": \"0\",\n  \"line_item amount\": \"100.50\",\n  \"line_item item_code\": \"sku_234_2\",\n  \"line_item qty\": \"1\",\n  \"line_item rate\": \"100.50\",\n  \"line_item value\": \"100.50\",\n  \"id\": 880862082\n}\n'","name":"SAMPLE POST REQUEST (RETURN)"}],"samples-languages":["curl"]}}},"/update":{"post":{"summary":"Retro Transaction","description":"","operationId":"retro-transaction","responses":{"200":{"description":"200","content":{"application/json":{"examples":{"Result":{"value":"{\n    \"response\": {\n        \"status\": {\n            \"success\": true,\n            \"code\": 200,\n            \"message\": \"Success\"\n        },\n        \"transactions\": {\n            \"transaction\": [\n                {\n                    \"customer\": {\n                        \"user_id\": \"564703252\",\n                        \"mobile\": \"919999988886\",\n                        \"firstname\": \"Tjuser\",\n                        \"lastname\": \"Eightysix\",\n                        \"email\": \"testusertjone@gmail.com\",\n                        \"external_id\": \"0000011110\",\n                        \"lifetime_points\": \"23009\",\n                        \"loyalty_points\": \"9\",\n                        \"current_slab\": \"Ruby\",\n                        \"tier_expiry_date\": \"2125-02-10 23:59:59\",\n                        \"lifetime_purchases\": \"164440\",\n                        \"type\": \"LOYALTY\",\n                        \"source\": \"instore\"\n                    },\n                    \"billing_time\": \"2025-04-03 09:00:15\",\n                    \"number\": \"test00notinterested002\",\n                    \"type\": \"REGULAR\",\n                    \"delivery_status\": \"DELIVERED\",\n                    \"old_id\": 323305546,\n                    \"old_type\": \"NOT_INTERESTED\",\n                    \"id\": 884721874,\n                    \"side_effects\": {\n                        \"effect\": [\n                            {\n                                \"type\": \"points\",\n                                \"awarded_points\": \"1\"\n                            }\n                        ]\n                    },\n                    \"item_status\": {\n                        \"success\": \"true\",\n                        \"code\": 1630,\n                        \"message\": \"Transaction retrospectively marked REGULAR, Transaction added successfully\"\n                    }\n                }\n            ]\n        }\n    }\n}"}},"schema":{"type":"object","properties":{"response":{"type":"object","properties":{"status":{"type":"object","properties":{"success":{"type":"boolean","example":true,"default":true},"code":{"type":"integer","example":200,"default":0},"message":{"type":"string","example":"Success"}}},"transactions":{"type":"object","properties":{"transaction":{"type":"array","items":{"type":"object","properties":{"customer":{"type":"object","properties":{"user_id":{"type":"string","example":"564703252"},"mobile":{"type":"string","example":"919999988886"},"firstname":{"type":"string","example":"Tjuser"},"lastname":{"type":"string","example":"Eightysix"},"email":{"type":"string","example":"testusertjone@gmail.com"},"external_id":{"type":"string","example":"0000011110"},"lifetime_points":{"type":"string","example":"23009"},"loyalty_points":{"type":"string","example":"9"},"current_slab":{"type":"string","example":"Ruby"},"tier_expiry_date":{"type":"string","example":"2125-02-10 23:59:59"},"lifetime_purchases":{"type":"string","example":"164440"},"type":{"type":"string","example":"LOYALTY"},"source":{"type":"string","example":"instore"}}},"billing_time":{"type":"string","example":"2025-04-03 09:00:15"},"number":{"type":"string","example":"test00notinterested002"},"type":{"type":"string","example":"REGULAR"},"delivery_status":{"type":"string","example":"DELIVERED"},"old_id":{"type":"integer","example":323305546,"default":0},"old_type":{"type":"string","example":"NOT_INTERESTED"},"id":{"type":"integer","example":884721874,"default":0},"side_effects":{"type":"object","properties":{"effect":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string","example":"points"},"awarded_points":{"type":"string","example":"1"}}}}}},"item_status":{"type":"object","properties":{"success":{"type":"string","example":"true"},"code":{"type":"integer","example":1630,"default":0},"message":{"type":"string","example":"Transaction retrospectively marked REGULAR, Transaction added successfully"}}}}}}}}}}}}}}},"400":{"description":"400","content":{"application/json":{"examples":{"Result":{"value":"{}"}},"schema":{"type":"object","properties":{}}}}}},"deprecated":false,"x-readme":{"code-samples":[{"language":"curl","code":"curl --location 'https://eu.api.capillarytech.com/v1.1/transaction/update' \\\n--header 'Accept: application/json' \\\n--header 'Content-Type: application/json' \\\n--header 'accept: application/json' \\\n--header 'X-CAP-CLIENT-SIGNATURE: INTOUCH_BLR' \\\n--header 'Authorization: Basic bmVlcmFqLmRvYzpiDA5Y2IwMzZhNGNjZGMzMzQzMWVmOWFjOQ==' \\\n--header 'Cookie: _cfuvid=sDY0XTxoNWKvGGj2I7gSCFlk1ElG0Gs6vvl9YVoiAfY-1736158614229-0.0.1.1-604800000' \\\n--data-raw '{\n  \"root\": {\n    \"transaction\": [{\n      \"customer\": {\n        \"mobile\": \"9999988886\",\n        \"email\": \"testusertjone@gmail.com\"\n      },\n      \"new_type\": \"REGULAR\",\n      \"notes\": \"Retro Transaction\",\n      \"id\": \"323305546\",\n      \"old_type\": \"NOT_INTERESTED\"\n    }]\n  }\n}","name":"Sample POST "}],"samples-languages":["curl"]}}}},"x-readme":{"headers":[{"key":"Content-Type","value":"application/json"},{"key":"Accept","value":"application/json"}],"explorer-enabled":false,"proxy-enabled":true},"x-readme-fauxas":true}