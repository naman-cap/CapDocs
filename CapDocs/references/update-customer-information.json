{"openapi":"3.0.0","info":{"title":"Update Customer Information","description":"Lets you update customer details using the registered identifiers of the customer.","version":"1.0.0"},"servers":[{"url":"https://apac.api.capillarytech.com","description":"Default Asia API Server"},{"url":"https://eu.api.capillarytech.com","description":"Default European API Server"},{"url":"https://us.api.capillarytech.com","description":"Default US API Server"}],"paths":{"/v2/customers/lookup":{"put":{"summary":"Update customer details based on lookup parameters","description":"Updates customer profiles, loyalty information, and program enrollments.","security":[{"BasicAuth":[]}],"parameters":[{"name":"source","in":"query","required":true,"description":"The source of the request.","schema":{"type":"string","enum":["FACEBOOK","WEB_ENGAGE","WECHAT","INSTORE","MARTJACK","TMALL","TAOBAO","JD","ECOMMERCE","WEBSITE","LINE","MOBILE_APP"],"example":"INSTORE"}},{"name":"identifierName","in":"query","required":true,"description":"Name of the identifier used for lookup.","schema":{"type":"string","enum":["mobile","email","externalId","cardnumber"],"example":"cardnumber"}},{"name":"identifierValue","in":"query","required":true,"description":"Value of the identifier used for lookup.","schema":{"type":"string","example":"BUK0000047075PR"}}],"requestBody":{"required":false,"content":{"application/json":{"schema":{"type":"object","properties":{"profiles":{"type":"array","items":{"type":"object","properties":{"firstName":{"type":"string","description":"Customer's first name"},"lastName":{"type":"string","description":"Customer's last name"},"fields":{"type":"object","properties":{"gender":{"type":"string","description":"Custom field details of the customer in key:value pairs."},"city":{"type":"string","description":"Customer's city"}}},"identifiers":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string","description":"Identifiers of the customer that you want to add in type and value. Supported types- mobile, email, externalId, wechat,martjackId, fbId mobile, tmall_uname, cuid, ali_uname, jd_uname, vip_uname, and line.","example":"email"},"value":{"type":"string","description":"Value of the identifier","example":"tom.sawyer@example.com"}}}},"commChannels":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string","description":"Communication channels of the customer.","example":"email"},"value":{"type":"string","description":"Based on the channel type enter the channel value. Example, mobile number is the value for type - mobile, firebase token for type:mobilePush. mobilePush is supported for sources mobile_app, Instore, Martjack, Ecommerce, and Website","example":"tom.sawyer@example.com"},"primary":{"type":"boolean","description":"Whether the current identifier is the primary identifier of the customer (primary identifier as per the org's configuration)."},"verified":{"type":"boolean","description":"Whether the current identifier is verified or not. For example, through OTP."},"meta":{"type":"object","properties":{"residence":{"type":"boolean","description":"Indicates if this is the residence channel."}}}}}},"source":{"type":"string","description":"Source of the profile","example":"WECHAT"},"accountId":{"type":"string","description":"Account ID associated with the source"}}}},"loyaltyInfo":{"type":"object","properties":{"loyaltyType":{"type":"string","description":"Loyalty status of the customer."}}},"extendedFields":{"type":"object","properties":{"gender":{"type":"string","description":"Extended field details of the customer in key:value pairs. You can only pass extended fields that are enabled for your org with the respective datatypes for values."},"city":{"type":"string","description":"Customer's city"}}},"loyaltyProgramEnrollments":{"type":"array","items":{"type":"object","properties":{"programId":{"type":"integer","description":"Unique ID of the loyalty program in which you want to enroll. You cannot update details if the customer is already enrolled in the loyalty program.","example":1016},"tierNumber":{"type":"integer","description":"Sequence number of the tier that you want to allocate to the customer. For example, 1 for the lower tier, 2 for the next tier, and so on.","example":234},"loyaltyPoints":{"type":"integer","description":"Loyalty points to credit in customer's account.","example":75},"tierExpiryDate":{"type":"string","format":"date-time","description":"Expiry date of the loyalty tier","example":"2022-02-11T11:06:17.000Z"},"pointsExpiryDate":{"type":"string","format":"date-time","description":"Expiry date and time of the points issued. Supported Format-YYYY-MM-DDTHH:MM:SS+/-(time-zone)."}}}}}}}}},"responses":{"200":{"description":"Customer details updated successfully"},"400":{"description":"Invalid request"},"401":{"description":"Unauthorized"},"500":{"description":"Server error"}}}}},"components":{"securitySchemes":{"BasicAuth":{"type":"http","scheme":"basic"}}},"x-readme":{"explorer-enabled":true,"proxy-enabled":true}}